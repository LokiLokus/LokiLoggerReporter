@{
    ViewData["Title"] = "Table";
}
<div id="tableAnalyze">
    <b-container fluid>
        <b-row>
            <b-col md="3" class="my-1">
                <b-form-group label-cols-sm="3" label="Source" class="mb-0">
                    <b-input-group>
                        <b-form-input v-model="source" placeholder="Source"></b-form-input>
                        <b-input-group-append>
                            <b-button variant="primary" @@click="getData">Get</b-button>
                        </b-input-group-append>
                    </b-input-group>
                </b-form-group>
            </b-col>


            <b-col md="3" class="my-1">
                <b-form-group label-cols-sm="3" label="Filter" class="mb-0">
                    <b-input-group>
                        <b-form-input v-model="filter" placeholder="Suche"></b-form-input>
                        <b-input-group-append>
                            <b-button :disabled="!filter" @@click="filter = ''">Clear</b-button>
                        </b-input-group-append>
                    </b-input-group>
                </b-form-group>
            </b-col>

            <b-col md="3" class="my-1">
                <b-form-group label-cols-sm="3" label="Class / Method" class="mb-0">
                    <b-input-group>
                        <b-form-input v-model="classFilter" placeholder="Class"></b-form-input>
                    </b-input-group>
                </b-form-group>
            </b-col>


            <!--LogLevel-->
            <b-dropdown id="dropdown-form" variant="primary" text="LogLevels" ref="dropdown" class="m-2">
                <b-dropdown-form>
                    <b-dropdown-header id="dropdown-header-label">
                        Log Levels
                    </b-dropdown-header>
                    <b-form-checkbox class="mb-3" v-model="debug">
                        <i class="fas fa-bug"></i> Debug
                    </b-form-checkbox>
                    <b-form-checkbox class="mb-3" v-model="info">
                        <i class="fas fa-info"></i>Information
                    </b-form-checkbox>
                    <b-form-checkbox class="mb-3" v-model="warn">
                        <i class="fas fa-exclamation-circle"></i>Warning
                    </b-form-checkbox>
                    <b-form-checkbox class="mb-3" v-model="error">
                        <i class="fas fa-times"></i>Error
                    </b-form-checkbox>
                    <b-form-checkbox class="mb-3" v-model="crit">
                        <i class="fas fa-skull-crossbones"></i>Critical
                    </b-form-checkbox>
                </b-dropdown-form>
            </b-dropdown>

            <b-dropdown id="dropdown-form" variant="primary" text="LogTyps" ref="dropdown" class="m-2">
                <b-dropdown-form>
                    <b-dropdown-header id="dropdown-header-label">
                        Log Levels
                    </b-dropdown-header>
                    <b-form-checkbox class="mb-3" v-model="norm">
                        <i class="fas fa-info"></i> Normal
                    </b-form-checkbox>
                    <b-form-checkbox class="mb-3" v-model="except">
                        <i class="fas fa-exclamation"></i> Exception
                    </b-form-checkbox>
                    <b-form-checkbox class="mb-3" v-model="retur">
                        <i class="fas fa-undo"></i> Return
                    </b-form-checkbox>
                    <b-form-checkbox class="mb-3" v-model="invoke">
                        <i class="fas fa-play"></i> Invoke
                    </b-form-checkbox>
                </b-dropdown-form>
            </b-dropdown>
        </b-row>


        <b-table
            show-empty
            stacked="md"
            :items="filterd"
            :fields="fields"
            :current-page="currentPage"
            :small="true"
            :striped="true"
            :per-page="perPage"
            :filter="filter"
            @@filtered="onFiltered"
            @@row-clicked="expandAdditionalInfo">
            <template slot="LogLevel" slot-scope="row">
                <i v-if="row.item.LogLevel == 0 || row.item.LogLevel == 1" class="fas fa-bug"></i>
                <i v-if="row.item.LogLevel == 2" class="fas fa-info"></i>
                <i v-if="row.item.LogLevel == 3" class="fas fa-exclamation-circle"></i>
                <i v-if="row.item.LogLevel == 4" class="fas fa-times"></i>
                <i v-if="row.item.LogLevel == 5" class="fas fa-skull-crossbones"></i>
            </template>

            <template slot="LogTyp" slot-scope="row">
                <i v-if="row.item.LogTyp == 0" class="fas fa-info"></i>
                <i v-if="row.item.LogTyp == 1" class="fas fa-exclamation"></i>
                <i v-if="row.item.LogTyp == 2" class="fas fa-undo"></i>
                <i v-if="row.item.LogTyp == 3" class="fas fa-play"></i>
            </template>

            <template slot="Time" slot-scope="row">
                {{row.item.Time | date}}
            </template>

            <template slot="Message" slot-scope="row">
                {{row.item | message }}
            </template>

            <template slot="row-details" slot-scope="row">
                <b-card>
                    <ul>
                        <li v-for="(value, key) in row.item" :key="key" v-if="key != '_showDetails' &&  value && ( key != 'Data' || key == 'Data' && value != '[]')">{{ key }}: {{ value }}</li>
                    </ul>
                </b-card>
            </template>

        </b-table>


        <b-row>
            <b-col md="6" class="my-1">
                <b-pagination
                    v-model="currentPage"
                    :total-rows="totalRows"
                    :per-page="perPage"
                    class="my-0">
                </b-pagination>
            </b-col>
        </b-row>

        <b-col md="3" class="my-1">
            <b-form-group label-cols-sm="3" label="Per page" class="mb-0">
                <b-form-select v-model="perPage" :options="pageOptions"></b-form-select>
            </b-form-group>
        </b-col>
    </b-container>
</div>


@section Scripts{
    <script src="/js/table.js"></script>
}